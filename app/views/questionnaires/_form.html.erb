<div class="col-sm-10">
  <%= form_for @questionnaire, :html => {class: "form-horizontal"} do |f| %>

    <div class="form-group">
      <%= f.label :name, "Name", :class => "col-sm-2 control-label" %>
      <div class="col-sm-10">
        <%= f.text_field :name, class: "form-control", placeholder: "Name" %>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :name, "Description", :class => "col-sm-2 control-label" %>
      <div class="col-sm-10">
        <%= f.text_area :description, class: "form-control", placeholder: "Description", rows: 5 %>
      </div>
    </div>

    <% if !@questionnaire.new_record? %>
      <h3>All Questions</h3>
      <hr/>

      <ul id="questionnaires" data-update-url="<%= sort_questionnaires_url %>">
        <% @questionnaire.questionnaire_links.each_with_index do |q,index| %>
          <%= content_tag_for :li, q do %>
            <span class="handle"><%= (index+1) %>.) <%= q.question.name %></span>
          <% end %>
        <% end %>
      </ul>
    <% end %>

    <div class="form-group">
      <%= f.label :questions, "#{@questionnaire.new_record? ? 'Add Questions' : 'Add or Remove a Question' }", :class => "col-sm-12 control-label", :style => "text-align: left;" %>
      <div class="col-sm-12">
        <%= hidden_field_tag 'questionnaire[question_ids][]', nil %>
        <% Question.all.each do |question| %>
          <%= check_box_tag 'questionnaire[question_ids][]', question.id, (@questionnaire.question_ids.include?(question.id) if @questionnaire.questions.present?), id: dom_id(question) %>
          <%= label_tag dom_id(question), question.name %>
          <br>
        <% end %>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <%= f.submit "#{@questionnaire.new_record? ? 'Create' : 'Update'}", :class => "btn btn-primary" %>
        <%= link_to "Cancel", questionnaires_path %>
      </div>
    </div>

  <% end %>
</div>
